<h1 class="Title">Alta de orden</h1>
<form  (keydown.enter)="$event.preventDefault()" class="custom-form" action="">
<div *ngIf="orden" class="col-md-12">
    <div class="row">
        <div class="col-md-12">
                <div class="form-group">
                        <label >Clave de la orden</label>
                        <div  class="row justify-content-center">
                            <input #clave (keyup)="changeID(cliente)"  
                            [(ngModel)]="orden['id']" name="id" type="text" 
                            class="form-control input-id">
                        </div>    
                        <label class="red" *ngIf="mensajeClave">La clave de la orden ya esta en uso</label>
                </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-6">
                <div class="form-group">
                        <label >Clave del cliente</label>
                        <div class="row justify-content-center">
                            <input #cliente (keyup)="changeCliente(empleado)" 
                             [(ngModel)]="orden['cliente']" name="cliente"
                              type="text" 
                            class="form-control input-id">
                        </div>    
                        <label class="red" *ngIf="mensajeCliente">La clave del cliente no existe!</label>
                </div>
        </div>
        <div class="col-md-6">
                <div class="form-group">
                        <label >Nombre del cliente</label>
                        <div #nombrec class="row justify-content-center">
                            <input disabled  
                             [(ngModel)]="nombreCliente"
                              name="nombrec" type="text" 
                            class="form-control input-long-text">
                        </div>    

                </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-6">
                <div class="row justify-content-center">
                        <div class="form-group">
                                <label >Clave del empleado supervisor</label>    
                                <div  class="row justify-content-center">
                                    <input #empleado 
                                    (keyup)="changeEmpleado(calle)"
                                     [(ngModel)]="orden['empleado']" 
                                     name="id_empleado" type="text" 
                                    class="form-control input-id">
                                </div> 
                                <label class="red" *ngIf="mensajeEmpleado">La clave del empleado no existe!</label>
                        </div>
                </div>
        </div>
        <div class="col-md-6">
                <div class="row justify-content-center">
                        <div class="form-group">
                                <label >Nombre del empleado supervisor</label>    
                                <div #nombree class="row justify-content-center">
                                        <input disabled   
                                        [(ngModel)]="nombreEmpleado" 
                                        name="nombre_empleado" type="text" 
                                        class="form-control input-long-text">
                                    </div>    
                        </div>
                </div>
        </div>
    </div>

    <div class="row">
            <div class="col-md-12">
                <h5>Fecha de la orden</h5>
                <div class="row">
                        <div class="col-md-6">
                                <label>Fecha requerida</label>
                                <div class="row justify-content-center">
                                    <input #fecha1 class="form-control input-small-text" name="fecha_requerda"
                                    [(ngModel)]="orden['fecha_requerida']"
                                    [owlDateTimeTrigger]="dt1" [owlDateTime]="dt1">
                                    <owl-date-time [pickerMode]="'dialog'" #dt1></owl-date-time>
                                </div>
                        </div>
                        <div class="col-md-6">
                                <label>Fecha de termino</label>
                                <div class="row justify-content-center">
                                    <input #fecha2 class="form-control input-small-text" name="fecha_termino" 
                                    [(ngModel)]="orden['fecha_termino']"
                                    [owlDateTimeTrigger]="dt2" [owlDateTime]="dt2">
                                    <owl-date-time [pickerMode]="'dialog'" #dt2></owl-date-time>
                                </div>
                        </div>
                </div>
            </div>
        </div>

    <div class="row" style="margin-top: 5px;">
        <div class="col-md-12">
                <h5>Direcci√≥n de la orden</h5>
                <div style="margin-top: 5px;" class="row">
                    <div class="col-md-3">
                            <div class="row justify-content-center">
                                    <div class="form-group">
                                            <label>Calle</label>
                                            <div class="row justify-content-center">
                                                <input (keyup.enter)="numero.focus()" #calle  
                                                [(ngModel)]="orden['calle']" name="calle" type="text" 
                                                class="form-control input-small-text">
                                            </div> 
                                    </div>
                            </div>
                    </div>
                    <div class="col-md-1">
                        <div class="row justify-content-center">
                                <div class="form-group">
                                        <label>Numero</label>
                                        <div class="row justify-content-center">
                                            <input (keypress)="noNegatives($event)" (keyup.enter)="ciudad.focus()" #numero  
                                            [(ngModel)]="numeroDir" name="numeroDir" type="number" 
                                            class="form-control input-id">
                                        </div> 
                                </div>
                        </div>
                </div>
                    <div class="col-md-3">
                            <div class="form-group">
                                    <label>Ciudad</label>
                                    <div class="row justify-content-center">
                                        <input #ciudad (keyup.enter)="estado.focus()" 
                                        [(ngModel)]="orden['ciudad']" name="ciudad" type="text" 
                                        class="form-control input-small-text"  >
                                    </div> 
                            </div>
                    </div>
                    <div class="col-md-2">
                            <div class="form-group">
                                    <label>Estado</label>
                                    <div class="row justify-content-center">
                                        <input (keyup.enter)="cp.focus()"  
                                        #estado [(ngModel)]="orden['estado']" name="estado" type="text" 
                                        class="form-control input-small-text">
                                    </div> 
                            </div>
                    </div>
                    <div class="col-md-3">
                            <div class="form-group">
                                    <label>Codigo postal</label>
                                    <div class="row justify-content-center">
                                        <input #cp (keypress)="noNegatives($event)"
                                        (focusout)="altaYBloquear(clave,cliente,empleado,fecha1,fecha2,calle,ciudad,estado,cp, numero)"
                                         (keyup)="changeCP()"  
                                        [(ngModel)]="orden['cp']" name="cp" type="text" 
                                        class="form-control input-id" >
                                    </div> 
                            </div>
                    </div>
                </div>
        </div>
    </div>






<div class="row justify-content-center">
        <div class="col-md-12">
          <h5 class="Title">Materiales de la orden de trabajo</h5>
        </div>
      </div>

      <div class="row align-items-center">
          <div class="col-md-2">
            <h5>Material {{numeroMaterial + 1}}</h5>
          </div>
          <div class="col-md-2">
              <label>Clave del material</label>
              <div class="row justify-content-center">
                  <input (keyup)="changeMaterialID(ce)" style="margin:3px;" 
                   [(ngModel)]="materiales[numeroMaterial]['id']" name="material" type="text" 
                  class="form-control input-id" >
              </div>
              <label class="red" *ngIf="mensajeMaterial">La clave del material no existe!</label>
          </div>
          <div class="col-md-2">
                <label>Nombre del material</label>
                <div class="row justify-content-center">
                    <input  disabled style="margin:3px;" 
                     [(ngModel)]="nombreMaterial" name="nombrematerial" type="text" 
                    class="form-control input-small-text" >
                </div>
            </div>
          <div class="col-md-2">
              <label>Cantidad estimada</label>
              <div class="row justify-content-center">
                  <input (keypress)="noNegatives($event)" #ce style="margin:3px;" name="c"  
                  [(ngModel)]="materiales[numeroMaterial]['cantidad_estimada']" type="number" 
                  class="form-control input-id" >
              </div>
          </div>
          <div class="col-md-2">
              <label>Cantidad real</label>
              <div class="row justify-content-center">
                  <input (keypress)="noNegatives($event)" cr style="margin:3px;" name="cr"  
                  [(ngModel)]="materiales[numeroMaterial]['cantidad_utilizada']" type="number" 
                  class="form-control input-id">
              </div>
          </div>
          <div class="row justify-content-center">
                <div class="col-md-12">
                    <app-alerta *ngIf="mensaje2" [mensaje]="mensaje2"></app-alerta>
                </div> 
            </div>
      </div>


      <div class="row justify-content-center espacio">
          <button style="margin:10px;" type="button" (click)="agregarMaterial()" class="btn btn-primary boton-agregar">Agregar un nuevo material</button>
      </div>

      <div class="row justify-content-center">
        <div class="col-md-12">
            <h5 class="Title">Tareas de la orden de trabajo</h5>
        </div>
      </div>

      <div class="row align-items-center">
        <div class="col-md-4">
          <h5>Tarea {{numeroTarea + 1}}</h5>
        </div>
        <div class="col-md-4">
          <label>Clave de la tarea</label>
          <div class="row justify-content-center">
                <input (keyup)="changeTarea()" 
                style="margin:3px;"  [(ngModel)]="tareas[numeroTarea]['id']" name="tarea" type="text" 
                class="form-control input-id"  >
          </div>
          <label class="red" *ngIf="mensajeTarea">La clave de la tarea no existe!</label>
            
        </div>
        <div class="col-md-4">
        <label>Nombre de la tarea</label>
                <div class="row justify-content-center">
                        <input disabled
                        style="margin:3px;"  [(ngModel)]="nombreTarea" 
                        name="nombretarea" type="text" 
                        class="form-control input-long-text"  >
                  </div>
        </div>
      </div>

      <div class="row justify-content-center espacio">
          <button style="margin:10px;" type="button" (click)="agregarTarea()"
           class="btn btn-primary boton-agregar">Agregar una nueva tarea</button>
      </div>
    
</div>
<div style="margin-bottom: 50px; border-top: 3px solid white; padding: 30px;" class="row justify-content-center">
        <div class="col-md-6">
          <div class="row justify-content-center">
              <button  type="button" routerLink="['/']" class="btn colord">Cancelar</button>
          </div>
        </div>
        <div class="col-md-6">
          <div class="row justify-content-center">
              <button  type="button" (click)="agregarOrden()" class="btn colorb">Agregar orden</button>
          </div>
        </div>
</div>

</form>